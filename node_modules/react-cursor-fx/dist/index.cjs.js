'use strict';

var react = require('react');

const isValidUrl = (url) => {
    try {
        new URL(url, window.location.origin);
        return true;
    }
    catch (e) {
        // console.warn('Invalid imageUrl provided:', url);
        return false;
    }
};
const Cursor = ({ type = 'default', size = 20, imageUrl, targetElement }) => {
    const defaultRef = react.useRef(document.body);
    const previousStyle = react.useRef(""); // Stores the original style of the element
    react.useEffect(() => {
        let target = null;
        // Determine the target element
        if (targetElement) {
            if (typeof targetElement === "string") {
                target = document.querySelector(targetElement);
            }
            else if (targetElement.current) {
                target = targetElement.current;
            }
        }
        else {
            target = defaultRef.current; // Uses document.body as default
        }
        if (!target) {
            // console.warn("Target element not found, skipping cursor application");
            return;
        }
        // Saves the element's original style before changing it
        previousStyle.current = target.style.cursor || 'auto';
        let cursorStyle = type;
        if (type === "custom" && imageUrl) {
            if (isValidUrl(imageUrl)) {
                const resolvedUrl = new URL(imageUrl, window.location.origin).href;
                cursorStyle = `url(${resolvedUrl}) ${size / 2} ${size / 2}, auto`;
            }
            else {
                // console.warn("Falling back to default cursor due to invalid imageUrl");
                cursorStyle = "auto";
            }
        }
        // console.log("Applying cursor to:", target, "Style:", cursorStyle);
        target.style.cursor = cursorStyle;
        // Cleanup: Restores the element's original style
        return () => {
            target.style.cursor = previousStyle.current;
        };
    }, [type, size, imageUrl, targetElement]);
    return null;
};

exports.Cursor = Cursor;
//# sourceMappingURL=index.cjs.js.map
